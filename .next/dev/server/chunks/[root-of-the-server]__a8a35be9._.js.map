{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/weather-dashboard/src/app/api/weather/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport axios from 'axios';\r\n\r\nexport async function GET(request) {\r\n  const { searchParams } = new URL(request.url);\r\n  const city = searchParams.get('city');\r\n  const lat = searchParams.get('lat');\r\n  const lon = searchParams.get('lon');\r\n\r\n  if (!city && (!lat || !lon)) {\r\n    return NextResponse.json({ error: 'City name or coordinates required' }, { status: 400 });\r\n  }\r\n\r\n  const apiKey = process.env.OPENWEATHER_API_KEY;\r\n\r\n  let url = '';\r\n  if (lat && lon) {\r\n      url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;\r\n  } else {\r\n      url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;\r\n  }\r\n\r\n  try {\r\n    const weatherResponse = await axios.get(url);\r\n    const weatherData = weatherResponse.data;\r\n\r\n    const { lon, lat } = weatherData.coord;\r\n    const aqiUrl = `https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${apiKey}`;\r\n    \r\n    let aqiData = null;\r\n    try {\r\n        const aqiResponse = await axios.get(aqiUrl);\r\n        aqiData = aqiResponse.data.list[0];\r\n    } catch (err) {\r\n        console.error(\"Failed to fetch AQI\", err);\r\n    }\r\n\r\n    return NextResponse.json({ ...weatherData, aqi: aqiData });\r\n  } catch (error) {\r\n    return NextResponse.json({ error: 'Failed to fetch weather data' }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAO;IAC/B,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,OAAO,aAAa,GAAG,CAAC;IAC9B,MAAM,MAAM,aAAa,GAAG,CAAC;IAC7B,MAAM,MAAM,aAAa,GAAG,CAAC;IAE7B,IAAI,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,GAAG,GAAG;QAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoC,GAAG;YAAE,QAAQ;QAAI;IACzF;IAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,mBAAmB;IAE9C,IAAI,MAAM;IACV,IAAI,OAAO,KAAK;QACZ,MAAM,CAAC,oDAAoD,EAAE,IAAI,KAAK,EAAE,IAAI,OAAO,EAAE,OAAO,aAAa,CAAC;IAC9G,OAAO;QACH,MAAM,CAAC,kDAAkD,EAAE,KAAK,OAAO,EAAE,OAAO,aAAa,CAAC;IAClG;IAEA,IAAI;QACF,MAAM,kBAAkB,MAAM,kJAAK,CAAC,GAAG,CAAC;QACxC,MAAM,cAAc,gBAAgB,IAAI;QAExC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,YAAY,KAAK;QACtC,MAAM,SAAS,CAAC,0DAA0D,EAAE,IAAI,KAAK,EAAE,IAAI,OAAO,EAAE,QAAQ;QAE5G,IAAI,UAAU;QACd,IAAI;YACA,MAAM,cAAc,MAAM,kJAAK,CAAC,GAAG,CAAC;YACpC,UAAU,YAAY,IAAI,CAAC,IAAI,CAAC,EAAE;QACtC,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,uBAAuB;QACzC;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,GAAG,WAAW;YAAE,KAAK;QAAQ;IAC1D,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACF"}}]
}